import React, { useState, useEffect } from "react";
import "./AdminPage.css";
import {variables,imageMap} from "../Variables.js";
import UpdateFormPopup from "./UpdateFormPopup.js"
import InfoPopup from "./InfoPopup.js"
import InsertFormPopup from "./InsertFormPopup.js"
import VisitsPopup from "./VisitsPopup.js"
import {useNavigate} from 'react-router-dom';

const AdminPage = () => {

    const navigate = useNavigate();

  const [properties, setProperties] = useState([]);
  useEffect(() => {
    const fetchProperties = async () => {
      const response = await fetch(variables.API_URL+'property');
      const data = await response.json();
      setProperties(data);
    };
    fetchProperties();
  }, []);

    const [selectedProperty, setSelectedProperty] = useState(null);
    const [isPopupOpen, setIsPopupOpen] = useState(false);
    const [isInfoPopupOpen, setIsInfoPopupOpen] = useState(false);
    const [isInsertPopupOpen, setIsInsertPopupOpen] = useState(false);
    const [insertedProperty, setInsertedProperty] = useState({});
    const [isVisitsPopupOpen, setIsVisitsPopupOpen] = useState(false);

    const deleteProperty = (id) => {
      fetch(variables.API_URL + 'property/' + id, {
        method: 'DELETE'
      })
      .then(response => {
        if (response.ok) {
          const updatedProperties = properties.filter(property => property.PropertyId !== id);
          setProperties(updatedProperties);
        } else {
          throw new Error('Failed to delete record');
        }
      })
      .catch(error => console.log(error));
    };

const handleFormSubmit = (event) => {
  event.preventDefault();
  const updatedProperty = {
    ...selectedProperty,
    Type: event.target[0].value,
    Price: event.target[1].value,
    Location: event.target[2].value,
    Dimension: event.target[3].value,
    Operation: event.target[4].value,
    Details: event.target[5].value,
    Image: event.target[6].value,
  };
  const updatedProperties = properties.map((property) => {
      if (property.PropertyId === updatedProperty.PropertyId) {
        return updatedProperty;
      } else {
        return property;
      }
    });
    setProperties(updatedProperties);
  fetch(variables.API_URL + 'property/' + updatedProperty.PropertyId, {
    method: 'PUT',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify(updatedProperty),
  })
    .then((response) => response.json())
    .then((data) => {
      setProperties(
        properties.map((property) =>
          property.PropertyId === data.PropertyId ? data : property
        )
      );
      setSelectedProperty(null);
      setIsPopupOpen(false);
      window.location.reload();
    });
};

const handleInsert = (event) => {
  event.preventDefault();
  const newProperty = {
    Type: event.target[0].value,
    Price: event.target[1].value,
    Location: event.target[2].value,
    Dimension: event.target[3].value,
    Operation: event.target[4].value,
    Details: event.target[5].value,
    Image: event.target[6].value,
  };

  fetch(variables.API_URL + 'property', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify(newProperty),
  })
    .then((response) => response.json())
    .then((data) => {
      setIsInsertPopupOpen(false);
      window.location.reload();
    });
};

const [visits, setVisits]= useState(null);

    const handleSeeVisits = (id) => {
      fetch(variables.API_URL + 'property/' + id, {
        method: 'GET'
      })
    .then((response) => response.json())
    .then((data) => {
      setVisits(data)
    });
    };

  const onlyHouses = properties.filter(property => property.Type === "house");
  const houseList = onlyHouses.map((house) => (
    <div key={house.PropertyId} className="house">
      <p>For {house.Operation}</p>
      <p>Type: {house.Type}</p>
      <p>Price: {house.Price}</p>
      <p>Location: {house.Location}</p>
      <p>Dimension: {house.Dimension}</p>
      <div className="image-container">
        <img className="images" src={imageMap[house.Image]} style={{width: "100px", height: "100px"}} />
      </div>
      <div className="icons2">
            <button onClick={() => {setSelectedProperty(house); setIsInfoPopupOpen(true);}}>
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" className="bi bi-info-circle" viewBox="0 0 16 16">
              <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
              <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/>
            </svg>
            </button>
            <button onClick={() => {setSelectedProperty(house); setIsPopupOpen(true);}}>
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" className="bi bi-pencil" viewBox="0 0 16 16">
              <path d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"/>
            </svg>
            </button>
            <button onClick={() => deleteProperty(house.PropertyId)}>
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" className="bi bi-trash3" viewBox="0 0 16 16">
              <path d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5ZM11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H2.506a.58.58 0 0 0-.01 0H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1h-.995a.59.59 0 0 0-.01 0H11Zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5h9.916Zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47ZM8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5Z"/>
            </svg>
            </button>
            <button onClick={() => {setSelectedProperty(house); setIsVisitsPopupOpen(true); handleSeeVisits(house.PropertyId);}}>
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-building-add" viewBox="0 0 16 16">
              <path d="M12.5 16a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7Zm.5-5v1h1a.5.5 0 0 1 0 1h-1v1a.5.5 0 0 1-1 0v-1h-1a.5.5 0 0 1 0-1h1v-1a.5.5 0 0 1 1 0Z"/>
              <path d="M2 1a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6.5a.5.5 0 0 1-1 0V1H3v14h3v-2.5a.5.5 0 0 1 .5-.5H8v4H3a1 1 0 0 1-1-1V1Z"/>
              <path d="M4.5 2a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1Zm3 0a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1Zm3 0a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1Zm-6 3a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1Zm3 0a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1Zm3 0a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1Zm-6 3a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1Zm3 0a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1Z"/>
            </svg>
            </button>

      </div>
    </div>
  ));

  const onlyApartments = properties.filter(property => property.Type === "apartment");
  const apartmentList = onlyApartments.map((apartment) => (
    <div key={apartment.PropertyId} className="apartment">
      <p>For {apartment.Operation}</p>
      <p>Type: {apartment.Type}</p>
      <p>Price: {apartment.Price}</p>
      <p>Location: {apartment.Location}</p>
      <p>Dimension: {apartment.Dimension}</p>
      <div className="image-container">
        <img className="images" src={imageMap[apartment.Image]} style={{width: "100px", height: "100px"}} />
      </div>
      <div className="icons2">
            <button onClick={() => {setSelectedProperty(apartment); setIsInfoPopupOpen(true);}}>
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" className="bi bi-info-circle" viewBox="0 0 16 16">
              <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
              <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/>
            </svg>
            </button>
            <button onClick={() => {setSelectedProperty(apartment); setIsPopupOpen(true);}}>
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" className="bi bi-pencil" viewBox="0 0 16 16">
              <path d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"/>
            </svg>
            </button>
            <button onClick={() => deleteProperty(apartment.PropertyId)}>
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" className="bi bi-trash3" viewBox="0 0 16 16">
              <path d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5ZM11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H2.506a.58.58 0 0 0-.01 0H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1h-.995a.59.59 0 0 0-.01 0H11Zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5h9.916Zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47ZM8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5Z"/>
            </svg>
            </button>
            <button onClick={() => {setSelectedProperty(apartment); setIsVisitsPopupOpen(true); handleSeeVisits(apartment.PropertyId);}}>
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-building-add" viewBox="0 0 16 16">
              <path d="M12.5 16a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7Zm.5-5v1h1a.5.5 0 0 1 0 1h-1v1a.5.5 0 0 1-1 0v-1h-1a.5.5 0 0 1 0-1h1v-1a.5.5 0 0 1 1 0Z"/>
              <path d="M2 1a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6.5a.5.5 0 0 1-1 0V1H3v14h3v-2.5a.5.5 0 0 1 .5-.5H8v4H3a1 1 0 0 1-1-1V1Z"/>
              <path d="M4.5 2a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1Zm3 0a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1Zm3 0a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1Zm-6 3a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1Zm3 0a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1Zm3 0a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1Zm-6 3a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1Zm3 0a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1Z"/>
            </svg>
            </button>
      </div>
    </div>
  ));

  const onlyStudios = properties.filter(property => property.Type === "studio");
  const studioList = onlyStudios.map((studio) => (
    <div key={studio.PropertyId} className="studio">
      <p>For {studio.Operation}</p>
      <p>Type: {studio.Type}</p>
      <p>Price: {studio.Price}</p>
      <p>Location: {studio.Location}</p>
      <p>Dimension: {studio.Dimension}</p>
      <div className="image-container">
        <img className="images" src={imageMap[studio.Image]} style={{width: "100px", height: "100px"}} />
      </div>
      <div className="icons2">
            <button onClick={() => {setSelectedProperty(studio); setIsInfoPopupOpen(true);}}>
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" className="bi bi-info-circle" viewBox="0 0 16 16">
              <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
              <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/>
            </svg>
            </button>
            <button onClick={() => {setSelectedProperty(studio); setIsPopupOpen(true);}}>
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" className="bi bi-pencil" viewBox="0 0 16 16">
              <path d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"/>
            </svg>
            </button>
            <button onClick={() => deleteProperty(studio.PropertyId)}>
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" className="bi bi-trash3" viewBox="0 0 16 16">
              <path d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5ZM11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H2.506a.58.58 0 0 0-.01 0H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1h-.995a.59.59 0 0 0-.01 0H11Zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5h9.916Zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47ZM8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5Z"/>
            </svg>
            </button>
            <button onClick={() => {setSelectedProperty(studio); setIsVisitsPopupOpen(true); handleSeeVisits(studio.PropertyId);}}>
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-building-add" viewBox="0 0 16 16">
              <path d="M12.5 16a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7Zm.5-5v1h1a.5.5 0 0 1 0 1h-1v1a.5.5 0 0 1-1 0v-1h-1a.5.5 0 0 1 0-1h1v-1a.5.5 0 0 1 1 0Z"/>
              <path d="M2 1a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6.5a.5.5 0 0 1-1 0V1H3v14h3v-2.5a.5.5 0 0 1 .5-.5H8v4H3a1 1 0 0 1-1-1V1Z"/>
              <path d="M4.5 2a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1Zm3 0a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1Zm3 0a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1Zm-6 3a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1Zm3 0a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1Zm3 0a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1Zm-6 3a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1Zm3 0a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1Z"/>
            </svg>
            </button>
      </div>
    </div>
  ));

 return(
    <div>
    <div className="label">Administrator page</div>
    <button className="add-property-button" onClick={() => {setIsInsertPopupOpen(true);}}>Add Property</button>
        <div className="label2-wrapper">
          <div id="apartments" className="label2">
            <p>Apartments</p>
          </div>
          <div className="horizontal-line"></div>
        </div>
        <div className="apartment-list">{apartmentList}</div>

        <div className="label3-wrapper">
          <div id="houses" className="label2">
            <p>Houses</p>
          </div>
          <div className="horizontal-line"></div>
        </div>
        <div className="house-list">{houseList}</div>

        <div className="label4-wrapper">
          <div id="studios" className="label2">
            <p>Studios</p>
          </div>
          <div className="horizontal-line"></div>
        </div>
        <div className="studio-list">{studioList}</div>

        {selectedProperty && (
        <UpdateFormPopup
          isOpen={isPopupOpen}
          selectedProperty={selectedProperty}
          handleFormSubmit={handleFormSubmit}
          handleClose={() => {setIsPopupOpen(false)}}
          setSelectedProperty={setSelectedProperty}
        />
        )}

        {selectedProperty && (
        <InfoPopup
          isOpen={isInfoPopupOpen}
          selectedProperty={selectedProperty}
          handleClose={() => {setIsInfoPopupOpen(false)}}
        />
        )}

        {
        <InsertFormPopup
          isOpen={isInsertPopupOpen}
          insertedProperty={insertedProperty}
          handleInsert={handleInsert}
          handleClose={() => {setIsInsertPopupOpen(false)}}
          setInsertedProperty={setInsertedProperty}
        />}

        {selectedProperty && (
        <VisitsPopup
          isOpen={isVisitsPopupOpen}
          visits={visits}
          selectedProperty={selectedProperty}
          handleClose={() => {setIsVisitsPopupOpen(false)}}
        />
        )}
    </div>
    )
}

export default AdminPage;
